function openPost(){var e=(document.getElementById("testmsg"),document.getElementById("myButton"));e.style.display="block"}function talktoServer(a,b){var c=newXMLHttpRequest(),d=getReadyStateHandler(c,updateMsgOnBrowser);c.onreadystatechange=d,c.open("POST","shoutbox.php",!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var e=document.getElementById("testmsg"),f=e.value,g=f.length;g>0&&(c.send("msg="+f+"&uid="+a+"&emsg="+b),e.value="Sending, please wait...")}function updateMsgOnBrowser(a){var b=a.getElementsByTagName("test")[0],c=a.getElementsByTagName("message")[0],d=a.getElementsByTagName("user_id")[0],e=a.getElementsByTagName("username")[0],f=a.getElementsByTagName("user_image")[0],g=b.getAttribute("timestamp");if(g>lastPing){lastPing=g;var h=c.firstChild.nodeValue,i=d.firstChild.nodeValue,j=e.firstChild.nodeValue,k=f.firstChild.nodeValue,l=document.getElementById("msg_display"),m=document.getElementById("minterface").value;1==m?(l.innerHTML='<li class="rmenu_post" id="rou"><div style="background:url(\'images/players/avatars/thumbs/'+k+'\'); background-repeat:no-repeat; width:24px; height:24px; margin-top:4px; margin-left:4px; float:left;">&nbsp;</div><div style="margin-left:34px;"><a rel="shadowbox;height=475;width=620;" href="playercard.php?playerid='+i+'" class="sgoldl">'+j+'</a><br><span class="info_ptime">Just now</span></div><div class="rrow_msg">'+h+"</div></li>"+l.innerHTML,ctmt=2e3):l.innerHTML='<li class="wall_post"><div style="background:url(\'images/players/avatars/portrait/'+k+'\'); background-repeat:no-repeat; width:45px; height:45px; margin-top:6px; margin-left:5px; float:left; float:left;">&nbsp;</div><div style="padding:5px; margin-left:50px;"><a href="javascript:open_window(\'playercard.php?playerid='+i+"','Profile_"+i+"','width=600,height=475,left=400,top=250,scrollbars=yes,resizable=yes');\">"+j+'</a><br /><span class="row_msg">'+h+"</span></div></li>"+l.innerHTML;var n=document.getElementById("testmsg");n.value="";var o=document.getElementById("myButton");o.style.display="none"}}function newXMLHttpRequest(){var e=!1;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}return e}function getReadyStateHandler(e,t){return function(){if(4==e.readyState)if(200==e.status)t(e.responseXML);else{var n=document.getElementById("hellomsg");n.innerHTML="ERROR: "+e.status}}}function cntchar2(t){var n=document.getElementById("testmsg");n.value.length>t?n.value=x:x=n.value,null==e?e=document.getElementById("cntChars2"):e.childNodes[0].data=220-n.value.length}var lastPing=0,x="",e=null;function padlength(e){var t=e.toString().length==1?"0"+e:e;return t}function displaytime(){serverdate.setSeconds(serverdate.getSeconds()+1);var e=padlength(serverdate.getHours())+":"+padlength(serverdate.getMinutes())+":"+padlength(serverdate.getSeconds());document.getElementById("servertime").innerHTML=e}function display_resources(){metal_value=metal_value+rate;rou=Math.round(metal_value);if(rou<=metal_max){document.getElementById("metal_reading").innerHTML=format("#.##0,####",rou)}crystal_value=crystal_value+ratec;rouc=Math.round(crystal_value);if(rouc<=crystal_max){document.getElementById("crystal_reading").innerHTML=format("#.##0,####",rouc)}deuterium_value=deuterium_value+rated;roud=Math.round(deuterium_value);if(roud<deuterium_max){document.getElementById("deuterium_reading").innerHTML=format("#.##0,####",roud)}}var lastPing=0;var x="";var e=null;window.format=function(e,t){if(!e||isNaN(+t))return t;var t=e.charAt(0)=="-"?-t:+t,n=t<0?t=-t:0,r=e.match(/[^\d\-\+#]/g),i=r&&r[r.length-1]||".",r=r&&r[1]&&r[0]||",",e=e.split(i),t=t.toFixed(e[1]&&e[1].length),t=+t+"",s=e[1]&&e[1].lastIndexOf("0"),o=t.split(".");if(!o[1]||o[1]&&o[1].length<=s)t=(+t).toFixed(s+1);s=e[0].split(r);e[0]=s.join("");var u=e[0]&&e[0].indexOf("0");if(u>-1)for(;o[0].length<e[0].length-u;)o[0]="0"+o[0];else+o[0]==0&&(o[0]="");t=t.split(".");t[0]=o[0];if(o=s[1]&&s[s.length-1].length){for(var s=t[0],u="",a=s.length%o,f=0,l=s.length;f<l;f++)u+=s.charAt(f),!((f-a+1)%o)&&f<l-o&&(u+=r);t[0]=u}t[1]=e[1]&&t[1]?i+t[1]:"";return(n?"-":"")+t[0]+t[1]}
function clear_attacker(){for(i=202;i<225;)document.getElementById(i)&&(document.getElementById(i).value="0"),i+=1}
function cntchar(a){window.document.forms[1].text.value.length>a?window.document.forms[1].text.value=x:x=window.document.forms[1].text.value,null==e?e=document.getElementById("cntChars"):e.childNodes[0].data=window.document.forms[1].text.value.length}
function mailbox(){document.getElementById("mailbox").innerHTML="Inbox",$("#mailbox").removeClass("nalert")}function format_row(a){var b='<li class="rmenu_post" style="display:none" id="row'+a.id+'"><div style="background:url(\'images/players/avatars/thumbs/'+a.avatar+'\');background-repeat:no-repeat; width:24px; height:24px; margin-top:4px; margin-left:4px; float:left;">&nbsp;</div><div style="margin-left:34px;"><a rel="shadowbox;height=475;width=620;" href="playercard.php?playerid='+a.userid+'" class="sgoldl">'+a.name+'</a><br><span class="info_ptime">'+a.when+'</span></div><div class="rrow_msg">'+a.message+"</div></li>";return b}function format_event(a){var b,c,d;1==a.m_type?(b="smode=chat&id="+a.m_sender_id+"&mowner="+a.user_id,d=a.m_title+' sent by <a rel="shadowbox;height=475;width=620;" href="playercard.php?playerid='+a.m_sender_id+'" class="sgoldl">'+a.m_sender+"</a>",c='<a href="messages.php?smode=chat&id='+a.m_sender_id+'" class="scifi">PRIVATE MESSAGE</a>'):(0==a.m_type?(b="mode=show&messcat="+a.m_type,d="Headquarters"==a.m_sender?"Your report of "+a.m_extra+" is ready":'Mission sent by <a rel="shadowbox;height=475;width=620;" href="playercard.php?playerid='+a.m_sender_id+'" class="sgoldl">'+a.m_extra+"</a>"):(b="mode=show&messcat="+a.m_type,d=""),c='<a  rel="shadowbox;height=561;width=496;" href="show_message.php?&id='+a.m_id+'" class="scifi">'+a.m_title.toUpperCase()+"</a>");var e='<li class="rmenu_post" style="display:none" id="event'+a.m_id+'"><div style="margin-left:2px;"><a href="messages.php?'+b+'" class="sgoldl">'+c+'</a><br><span class="info_ptime">'+a.m_time+'</span></div><div class="rrow_msg">'+d+"</div></li>";return e}function dopoll(){setTimeout(function(){ctmt<6e4&&(ctmt+=1e3),$.ajax({url:"zed.php",type:"GET",success:function(a){a=$.parseJSON(a),$("#rou").remove(),a.id>0&&($("#msg_display").after(format_row(a)),$("#row"+a.id).fadeIn(600)),a.m_id>0&&($("#live_events").prepend(format_event(a)),$("#event"+a.m_id).fadeIn(600),ctmt>1e4&&(ctmt=1e4)),a.id>0&&a.m_id>0?$(document).prop("title","NEW EVENT!"):a.id>0?$(document).prop("title","NEW CHAT REPLY!"):a.m_id>0&&$(document).prop("title","NEW EVENT!"),Shadowbox.setup()},dataType:"json",complete:dopoll,timeout:2e3})},ctmt)}var ctmt=2e3;